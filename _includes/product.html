<section class="hero-section" style="min-height: 450px;">
    <div class="bg-img">
        <img src="{{ product.hero_image[0] }}" alt="{{ product.hero_image[1] }}" />
        <div class="hero-mask"></div>
    </div>
</section>

<div class="product-preview">
    <div class="container--sm">
        <div class="product-card pixel-box is-relative">
            <div class="columns is-desktop is-gapless is-multiline is-vcentered">
                <div class="column">
                    <figure class="image is-16by9" style="border-radius: 5px; overflow: hidden;">
                        {%- if product.video -%}
                        <iframe title="{{ product.name}} trailer video" class="has-ratio" width="640" height="360"
                            src="https://www.youtube.com/embed/{{ product.video }}?rel=0" frameborder="0"
                            allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                            allowfullscreen>
                        </iframe>
                        {%- else -%}
                        <img src="/img/product/{{ product.code }}-640-360.jpg" />
                        {%- endif -%}
                    </figure>
                </div>
                <div class="column">
                    <div class="card-inner">
                        {%- if product.sale -%}
                            <img class="product-sale" src="/img/product/sale-lable.svg" alt="Product sale label" />
                        {%- endif -%}
                        <img class="product-logo" src="/img/product/{{product.code}}-logo.svg" alt="{{product.name}} logo" />
                        <p class="title is-3 py-4" style="display: none;">{{ product.title }}</p>
                        <h1 class="is-uppercase has-text-weight-bold" style="border-bottom: 1px solid #DCDCDC;">{{ product.subtitle }}</h1>

                        {%- if product.features -%}
                            <div class="content pt-4">
                                {%- for feature in product.features -%}
                                    <p>
                                        <span class="icon has-text-primary">
                                            {%- if feature.icon -%}
                                                <i class="fas {{ feature.icon }}"></i>
                                            {%- else -%}
                                                <i class="fas fa-circle fa-xs"></i>
                                            {%- endif -%}
                                        </span>
                                        <span>{{ feature.label }}</span>
                                    </p>
                                {%- endfor -%}
                            </div>
                        {%- endif -%}
                    </div>
                </div>
                <div class="column is-12">
                    <div class="product-info mt-5">
                        <div class="columns is-desktop is-gapless is-vcentered">
                            <div class="column is-two-thirds-tablet is-half-desktop">
                                <div class="info-price is-flex">
                                    <a alt="{{ product.name }} Pixelatto buy button" href="https://transactions.sendowl.com/products/78274278/42A4FD4D/purchase" rel="nofollow" id="buy-button" class="button button-round is-secondary">Get it now</a>
                                    <script type="text/javascript" src="https://transactions.sendowl.com/assets/sendowl.js"></script>
                                    {%- if product.old-price -%}
                                        <div class="price-box price-red is-relative is-uppercase has-text-weight-bold has-text-centered is-size-4">
                                            <p class="old-price is-size-6"><s>{{ product.old-price }} &euro;</s></p>
                                            <div id="price" class="{{ product.name | downcase | slugify }}-price"></div>
                                        </div>
                                    {%- else -%}
                                        <div class="price-box is-relative is-uppercase has-text-secondary has-text-weight-bold has-text-centered is-size-4">
                                            <div id="price" class="{{ product.name | downcase | slugify }}-price"></div>
                                        </div>
                                    {%- endif -%}
                                </div>
                            </div>
                            <div class="column is-full-mobile is-two-thirds-tablet is-half-desktop">
                                <div class="info-platforms">
                                    {% include external-store-buttons.html %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <section class="section description-section">
        <div class="container--sm">
            <div class="columns is-multiline is-vcentered is-gapless has-text-justified has-text-left-touch">
                <div class="column is-12">
                    <h2 class="inner-title is-uppercase has-text-weight-bold pb-4 mb-4">Description</h2>
                    <div class="content">
                        {{ product.long_description | newline_to_br }}
                    </div>
                </div>
                <!--Screenshots-->
                <div class="column is-12">
                    <br />
                    <br />
                    <h2 class="inner-title is-uppercase has-text-weight-bold pb-4 mb-4">Screenshots</h2>
                    <!-- Start Carousel -->
                    <div id="product-carousel" class="carousel">
                        {% assign cont = 1 %}
                        {% for image in product.gallery.images %}
                        <div class="item-{{ cont }}">
                            <img alt="{{product.name}} screenshot {{ cont }}" src="{{ product.gallery.imagefolder }}{% if image.thumbnail %}{{ image.thumbnail }}{% else %}{{ image.name }}{% endif %}"
                                onclick="openModal('product-modal');currentSlide({{ cont }})">
                        </div>
                        {% assign cont = cont | plus:1 %}
                        {% endfor %}
                    </div>
                    <!-- End Carousel -->
                </div>
                <!-- Start lightbox modal -->
                <div id="product-modal" class="modal" onclick="ClickOpenedModal(event)">
                    <div class="modal-content is-vcentered">
                        {% assign cont = 1 %}
                        {% for image in product.gallery.images %}
                        <div class="item-slide product-modal-slide">
                            <img loading="lazy" alt="{{product.name}} lightbox image {{ cont }}" src="{{ product.gallery.imagefolder }}{{ image.name }}">
                        </div>
                        {% assign cont = cont | plus:1 %}
                        {% endfor %}
                    </div>
                    <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
                    <a class="next" onclick="plusSlides(1)">&#10095;</a>
                    <button onclick="closeModal()" class="modal-close is-large" aria-label="close"></button>
                </div>
                <!-- End lightbox modal -->
            </div>
        </div>
    </section>

    {%- if product.versions -%}
        <section class="section comparison-section">
            <div class="container--sm">
                <h2 class="inner-title is-uppercase has-text-weight-bold pb-4 mb-4">Product Features</h2>
                <div class="features-comparison">
                    <div class="pixel-box is-relative">
                        <div class="comparison-content">
                            <ul class="features-list">
                                {%- for single in product.versions.features-list -%}
                                    <li>{{ single.feature.name }}</li>
                                {%- endfor -%}
                            </ul>
                            <div class="versions">
                                {%- for version in product.versions.versions-list -%}
                                    <div class="version-item pixel-box">
                                        <ul class="versions-list has-text-centered">
                                            <li class="version-title is-size-6-mobile is-size-4 has-text-weight-bold has-text-secondary">{{ version.title }}</li>
                                            {%- for entry in version.control-version -%}
                                                <li class="{% if entry.has-feature %}has-feature{% else %}no-feature{% endif %}"></li>
                                            {%- endfor -%}
                                            <li class="version-title version-footer has-text-secondary">
                                                <!-- <p class="has-text-weight-bold py-2">33.99 &euro;</p> -->
                                                <a alt="{{ product.name }} Pixelatto buy button" href="#" rel="nofollow" class="button button-round is-secondary">Get it now!</a>
                                            </li>
                                        </ul>
                                    </div>
                                {%- endfor -%}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    {%- endif -%}

    <section>
        <div class="container--sm">
            <table class="table">
                <colgroup>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                </colgroup>
                <thead>
                    <th></th>
                    {%- for version in product.versions.versions-list -%}
                        <th class="table-cell col-title">{{ version.title }}</th>
                        <th class="empty"></th>
                    {%- endfor -%}
                </thead>
                <tbody class="pixel-box">
                    {%- for single in product.versions.features-list -%}
                        <tr>
                            <td class="feature-cell has-text-weight-bold">{{ single.feature.name }}</td>
                            <!-- <td class="table-cell">yes</td>
                            <td class="empty"></td>
                            <td class="table-cell">no</td>
                            <td class="empty"></td> -->
                            {%- for ftr in single.has-feature -%}
                                <td class="table-cell">{% if ftr.item %}yes{% else %}no{% endif %}</td>
                                <td class="empty"></td>
                            {%- endfor -%}
                        </tr>
                    {%- endfor -%}
                </tbody>
                <tfoot>
                    <tr>
                        <td></td>
                        {%- for version in product.versions.versions-list -%}
                            <td class="table-cell col-footer">Get it now</td>
                            <td class="empty"></td>
                        {%- endfor -%}
                    </tr>
                </tfoot>
            </table>
        </div>
    </section>

    {%- if product.awards -%}
        <section class="section awards-section">
            <div class="container--sm">
                <h2 class="inner-title is-uppercase has-text-weight-bold pb-4 mb-4">Awards</h2>
                {% include redesign/awards-block.html %}
            </div>
        </section>
    {%- endif -%}

    {%- if product.presskit.tweets -%}
        <section class="section testimonials-section">
            <div class="container--sm">
                <h2 class="inner-title is-uppercase has-text-weight-bold pb-4 mb-4">Testimonials</h2>
                <!-- <div class="columns is-multiline is-centered">
                    {%- for tweet in product.presskit.tweets -%}
                    <div class="column is-4">
                        <blockquote class="tweet" tweetID="{{ tweet }}"></blockquote>
                    </div>
                    {%- endfor -%}
                </div> -->

                <!-- <div id="testimonials-carousel" class="carousel">
                    {% assign cont = 1 %}
                    {%- for tweet in product.presskit.tweets -%}
                        <div class="item-{{ cont }}">
                            <blockquote class="tweet" tweetID="{{ tweet }}"></blockquote>
                        </div>
                        {% assign cont = cont | plus:1 %}
                    {%- endfor -%}
                </div> -->

                <div class="tile is-ancestor">
                    {%- for tweet in product.presskit.tweets limit:3 -%}
                    <div class="tile is-parent">
                      <article class="tile is-child box">
                        <blockquote class="tweet" tweetID="{{ tweet }}"></blockquote>
                      </article>
                    </div>
                    {%- endfor -%}
                </div>
                <div class="tile is-ancestor">
                    {%- for tweet in product.presskit.tweets limit:3 offset:3 -%}
                    <div class="tile is-parent">
                      <article class="tile is-child box">
                        <blockquote class="tweet" tweetID="{{ tweet }}"></blockquote>
                      </article>
                    </div>
                    {%- endfor -%}
                </div>
                <div class="tile is-ancestor">
                    {%- for tweet in product.presskit.tweets limit:3 offset:6 -%}
                    <div class="tile is-parent">
                      <article class="tile is-child box">
                        <blockquote class="tweet" tweetID="{{ tweet }}"></blockquote>
                      </article>
                    </div>
                    {%- endfor -%}
                </div>
                <div class="tile is-ancestor">
                    {%- for tweet in product.presskit.tweets limit:3 offset:9 -%}
                    <div class="tile is-parent">
                      <article class="tile is-child box">
                        <blockquote class="tweet" tweetID="{{ tweet }}"></blockquote>
                      </article>
                    </div>
                    {%- endfor -%}
                </div>
            </div>
        </section>
    {%- endif -%}
</div>

{% include redesign/subscribe-form.html class="pt-0" %}

{% contentfor extra-js no-convert %}
    <script>
        var priceHTML = document.getElementById("price");
        var buyButtonHTML = document.getElementById("buy-button");
        getSendOwlProduct({{ product.sendowl_id }}).then((data) => {
            priceHTML.textContent = data.product.price + " €";
            buyButtonHTML.href = data.product.instant_buy_url;
        });
    </script>
{% endcontentfor %}
